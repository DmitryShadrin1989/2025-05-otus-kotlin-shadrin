# Architecture Decision Records (ADR) для проекта «Электронная записная книжка»


## ADR‑001: Выбор системы управления базами данных (СУБД)

**Статус:** принято  
**Дата:** 2025-11-30  
**Автор:** Шадрин Дмитрий

### Контекст
Для хранения пользовательских данных (записей, профилей, настроек) требуется надёжная СУБД. Ключевые требования:
* гарантия целостности данных (ACID);
* поддержка структурированных запросов;
* масштабируемость для потенциального роста проекта;
* совместимость с Kotlin/Spring (серверная часть).

### Рассмотренные варианты
1. **PostgreSQL**
    * Плюсы: ACID, богатая функциональность, индексы, JSON‑поддержка, активное сообщество.
    * Минусы: требует настройки сервера.
2. **SQLite**
    * Плюсы: простота, нет сервера, подходит для прототипов.
    * Минусы: ограниченная масштабируемость, проблемы с конкурентным доступом.
3. **MongoDB**
    * Плюсы: гибкость схемы, простота старта.
    * Минусы: риск потери целостности данных, сложность сложных запросов.
4. **H2**
    * Плюсы: встроенная в приложение, минимум настроек.
    * Минусы: низкая производительность, ограниченные возможности.


### Решение
Выбрать **PostgreSQL**.

**Почему:**
* Гарантирует целостность данных (критично для пользовательских записей).
* Поддерживает сложные запросы (поиск, фильтрация, сортировка).
* Имеет широкую экосистему инструментов (миграции, мониторинг).
* Соответствует промышленным стандартам — опыт будет полезен в реальных проектах.

### Последствия
**Плюсы:**
* Надёжное хранение данных.
* Возможность масштабирования (например, переход на облачный PostgreSQL).
* Поддержка транзакций и связей между таблицами.

**Минусы:**
* Требуется настройка сервера (локального или облачного).
* Дополнительные усилия на управление миграциями схемы.

**Риски и смягчение:**
* Риск: сложность развёртывания.
    * Смягчение: использование Docker‑контейнера для локальной разработки.
* Риск: нагрузка на сервер при росте пользователей.
    * Смягчение: оптимизация запросов и индексов.

---

## ADR‑002: Выбор основного UI для MVP

**Статус:** принято  
**Дата:** 2025-11-30  
**Автор:** Шадрин Дмитрий

### Контекст
Для MVP требуется быстрый запуск с минимальными затратами на разработку интерфейса. Ключевые требования:
* мгновенный доступ для пользователей (без установки приложения);
* простота реализации серверной интеграции;
* поддержка базовых функций (создание, просмотр, редактирование записей).

### Рассмотренные варианты
1. **Telegram‑бот**
    * Плюсы:
        * пользователи уже в экосистеме Telegram;
        * простой API для интеграции;
        * поддержка клавиатур, inline‑кнопок, файлов.
    * Минусы:
        * ограничения интерфейса (нет сложных UI‑элементов);
        * зависимость от Telegram‑API.
2. **Веб‑интерфейс (SPA на React/Vue)**
    * Плюсы: полный контроль над UI, кросс‑платформенность.
    * Минусы: требуется разработка фронтенда, хостинг, SSL.
3. **Мобильное приложение (Kotlin/Swift)**
    * Плюсы: нативный опыт, push‑уведомления.
    * Минусы: высокие затраты на разработку и поддержку двух платформ.
4. **Десктоп‑приложение (Electron/Tauri)**
    * Плюсы: единый код для Windows/macOS/Linux.
    * Минусы: большой размер дистрибутива, низкая производительность.

### Решение
Использовать **Telegram‑бота** в качестве основного UI для MVP.

**Почему:**
* Мгновенный доступ: пользователи не требуют установки дополнительного ПО.
* Экономия времени: разработка бота занимает меньше ресурсов, чем веб‑ или мобильное приложение.
* Готовые инструменты: Telegram Bot API поддерживает все базовые функции (клавиатуры, файлы, inline‑режим).
* Потенциал масштабирования: позже можно добавить веб‑интерфейс или мобильное приложение как дополнительные точки входа.

### Последствия
**Плюсы:**
* Быстрый запуск MVP.
* Низкий порог входа для пользователей.
* Простота тестирования гипотез.

**Минусы:**
* Ограниченные возможности UI (например, нет визуального редактора текста).
* Зависимость от стабильности Telegram‑API.
* Сложность реализации сложных взаимодействий (drag‑and‑drop, rich‑текст).

**Риски и смягчение:**
* Риск: блокировка бота Telegram.
    * Смягчение: резервное копирование данных, уведомление пользователей о смене канала.
* Риск: ограничения API (например, на размер сообщений).
    * Смягчение: разбиение длинных записей на части, использование файлов для вложений.
